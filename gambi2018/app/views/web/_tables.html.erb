<%= render "layouts/shared/navbar_mini" %>
<%= render "reservar_table" %>
<%= render "user_add_modal" %>
<main class="container-fluid" role="main">
	<center>
		<h2> Te damos la bienvenida a la reserva de mesas</h2>
	</center>
	<div class="row">
		<div class="col-md-1"></div>
		<div class="col-md-4 table_sector"> 
			Seccion uno
			<table id="sector_1">
				<% (0..8).to_a.each do |i|%>
					<tr>
						<%(1..10).to_a.each do |j|%>

							<% table = Table.find(j + 10*i) %>
							<td  class="<%= "table-appendable" if table.has_room? %> table-entry table-<%= table.status.downcase %>" id="<%= j + 10*i%>"> <%= image_tag("table.png", size: "25x25")%> <%= j + 10*i%> </td>
						<%end%>
					</tr>
				<%end%>
			</table>
		</div>
		<div class="col-md-2"></div>
		<div class="col-md-4 table_sector">
			Seccion dos
			<table id="sector_2">
				<% (0..8).to_a.each do |i|%>
					<tr>
						<%(1..10).to_a.each do |j|%>
							<% table = Table.find(90 + j + 10*i) %>
							<td class="<%= "table-appendable" if table.has_room? %> table-entry table-<%= table.status.downcase %>" id="<%= 90 + j + 10*i%>"> <%= image_tag("table.png", size: "25x25")%> <%=90 + j + 10*i%> </td>
						<%end%>
					</tr>
				<%end%>
			</table>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-md-2"></div>
		<div class="col-md-8 table_sector">
			Seccion tres
			<table id="table_3">
				<% (0..9).to_a.each do |i|%>
					<tr>
						<%(1..12).to_a.each do |j|%>
							<% table = Table.find(180 + j + 12*i) %>
							<td class="<%= "table-appendable" if table.has_room? %> table-entry table-<%= table.status.downcase %>" id="<%= 180 + j + 12*i%>"> 
								<%= image_tag("table.png", size: "25x25")%> <%=180 + j + 12*i%> 
							</td>
						<%end%>
					</tr>
				<%end%>
			</table>
		</div>
	</div>

</main>
<script type="text/javascript">
	$(".table-disponible").click(function(){
		//<!-- esta funcion recupera el id de la mesa en la que se hizo click y genera el modal para la reserva de mesas-->
		var id = $(this).attr("id");
		$("#user_reserve_modal").find("form").attr("action", "/reserve/"+id);
		$("#user_reserve_modal").modal("show");
	});

	$(".table-appendable").click(function(){
		var id = $(this).attr("id");
		$("#user_add_modal").find("form").attr("action", "/join/"+id);
		$("#table-number").text(id);
		$("#user_add_modal").modal("show");
	});
</script>